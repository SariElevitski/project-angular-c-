<!-- 🔍 סרגל סינונים מעוצב -->
<div class="filters-container">
  
  <!-- תיבת חיפוש -->
  <div class="filter-item">
    <label>🔍 חיפוש מוצר:</label>
    <input 
      type="text" 
      [(ngModel)]="searchTerm" 
      (input)="onSearchChange()" 
      placeholder="הקלד שם מוצר..."
      class="search-box"
    />
  </div>

  <!-- מחיר מינימום -->
  <div class="filter-item">
    <label>💰 מחיר מינימום:</label>
    <input 
      type="number" 
      [(ngModel)]="minPrice" 
      (input)="onPriceChange()" 
      placeholder="0"
      class="price-input"
    >
  </div>

  <!-- מחיר מקסימום -->
  <div class="filter-item">
    <label>💰 מחיר מקסימום:</label>
    <input 
      type="number" 
      [(ngModel)]="maxPrice" 
      (input)="onPriceChange()" 
      placeholder="1000"
      class="price-input"
    >
  </div>

  <!-- כפתור ניקוי -->
  <div class="filter-item">
    <button 
      class="clear-btn"
      (click)="minPrice = null; maxPrice = null; searchTerm = ''; onPriceChange(); onSearchChange()"
    >
      🗑️ נקה סינונים
    </button>
  </div>

</div>

<hr class="divider">

<!-- 📦 רשת מוצרים -->
<div *ngIf="products$ | async as products; else loadingOrEmpty">
  
  <div *ngIf="products.length > 0; else noResults">
    
    <div class="products-grid">
      
      <div *ngFor="let product of products" class="product-card">
        <a [routerLink]="['/product', product.id]" class="product-link">
          
          <!-- תמונה -->
          <div class="image-container">
            <img 
              [src]="'http://localhost:5183/images/' + product.imageUrl" 
              [alt]="product.name"
              class="product-image"
            />
          </div>

          <!-- פרטי מוצר -->
          <div class="product-details">
            <h3 class="product-name">{{ product.name }}</h3>
            <p class="product-price">{{ product.price }} ₪</p>
            <p class="product-category">קטגוריה: {{ product.categoryId }}</p>
            <button (click)="addToCart(product)">הוסף לעגלה 🛒</button>
             
          </div>

        </a>
      </div>

    </div>

  </div>

  <ng-template #noResults>
    <div class="no-results">
      ⚠️ לא נמצאו מוצרים התואמים לחיפוש "{{ searchTerm }}" או לטווח המחירים.
    </div>
  </ng-template>

</div>

<ng-template #loadingOrEmpty>
  <div class="loading-msg">
    ⏳ טוען מוצרים...
  </div>
</ng-template>